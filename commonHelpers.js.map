{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst API_KEY = '42179520-d47d5bd3a5ac50ed017a72958';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst form = document.querySelector('.form');\nconst galery = document.querySelector('.gallery');\nconst spinner = document.querySelector('.loader');\n\nspinner.style.display = 'none';\n\n\n\nform.addEventListener('submit', onFormSubmit);\n\nfunction onFormSubmit(ev) {\n    ev.preventDefault();\n    spinner.style.display = 'block';\n    galery.innerHTML = '';\n    const selectedPicture = ev.target.image.value;\n    fetchImages(selectedPicture).then(images => {\n        handleWithResponce(images);\n    }).catch(error => console.log(error))\n}\n\nfunction fetchImages(image) {\n    const searchParams = new URLSearchParams({\n        key: API_KEY,\n        image_type: \"photo\",\n        orientation: 'horizontal',\n        safesearch: true,\n    });\n\n    return fetch(`${BASE_URL}?${searchParams}&q=${image}`).then(response => {\n        if (!response.ok) {\n            throw new Error(response.status)\n        }\n        return response.json();\n    })\n}\n\nfunction handleWithResponce(images) {\n    if (!images.total) {\n        iziToast.error({\n            position: 'topRight',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            timeout: 2000,\n        });\n        spinner.style.display = 'none';\n        return\n    }\n    iziToast.success({\n        position: 'topRight',\n        message: `Congratulations! We found ${images.total} images`,\n        timeout: 2000,\n    });\n    renderGallery(images.hits);\n    spinner.style.display = 'none';\n    const galleryLightBox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    galleryLightBox.refresh();\n}\n\n\nfunction renderGallery(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, comments, downloads, views }) => `<li class='gallery-item'>\n    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n        <div class=\"gallery-description\">\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Likes</div>\n        <div class=\"lower-text\">${likes}</div>\n      </span>\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Views</div>\n        <div class=\"lower-text\">${views}</div>\n      </span>\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Comments</div>\n        <div class=\"lower-text\">${comments}</div>\n      </span>\n      <span class='gallery-span'>\n        <div class=\"upper-text\">Downloads</div>\n        <div class=\"lower-text\">${downloads}</div>\n      </span>\n      </div>\n        </a>\n</li>`).join('');\n    galery.insertAdjacentHTML('beforeend', markup);\n}"],"names":["API_KEY","BASE_URL","form","galery","spinner","onFormSubmit","ev","selectedPicture","fetchImages","images","handleWithResponce","error","image","searchParams","response","iziToast","renderGallery","SimpleLightbox","markup","webformatURL","largeImageURL","tags","likes","comments","downloads","views"],"mappings":"6vBAKA,MAAMA,EAAU,qCACVC,EAAW,2BAEXC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAS,SAAS,cAAc,UAAU,EAC1CC,EAAU,SAAS,cAAc,SAAS,EAEhDA,EAAQ,MAAM,QAAU,OAIxBF,EAAK,iBAAiB,SAAUG,CAAY,EAE5C,SAASA,EAAaC,EAAI,CACtBA,EAAG,eAAc,EACjBF,EAAQ,MAAM,QAAU,QACxBD,EAAO,UAAY,GACnB,MAAMI,EAAkBD,EAAG,OAAO,MAAM,MACxCE,EAAYD,CAAe,EAAE,KAAKE,GAAU,CACxCC,EAAmBD,CAAM,CACjC,CAAK,EAAE,MAAME,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACxC,CAEA,SAASH,EAAYI,EAAO,CACxB,MAAMC,EAAe,IAAI,gBAAgB,CACrC,IAAKb,EACL,WAAY,QACZ,YAAa,aACb,WAAY,EACpB,CAAK,EAED,OAAO,MAAM,GAAGC,CAAQ,IAAIY,CAAY,MAAMD,CAAK,EAAE,EAAE,KAAKE,GAAY,CACpE,GAAI,CAACA,EAAS,GACV,MAAM,IAAI,MAAMA,EAAS,MAAM,EAEnC,OAAOA,EAAS,MACxB,CAAK,CACL,CAEA,SAASJ,EAAmBD,EAAQ,CAChC,GAAI,CAACA,EAAO,MAAO,CACfM,EAAS,MAAM,CACX,SAAU,WACV,QAAS,2EACT,QAAS,GACrB,CAAS,EACDX,EAAQ,MAAM,QAAU,OACxB,MACH,CACDW,EAAS,QAAQ,CACb,SAAU,WACV,QAAS,6BAA6BN,EAAO,KAAK,UAClD,QAAS,GACjB,CAAK,EACDO,EAAcP,EAAO,IAAI,EACzBL,EAAQ,MAAM,QAAU,OACA,IAAIa,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EACnF,QAAO,CAC3B,CAGA,SAASD,EAAcP,EAAQ,CAC3B,MAAMS,EAAST,EAAO,IAAI,CAAC,CAAE,aAAAU,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,SAAAC,EAAU,UAAAC,EAAW,MAAAC,CAAO,IAAK;AAAA,oCACxEL,CAAa;AAAA,0CACPD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,kCAIlCC,CAAK;AAAA;AAAA;AAAA;AAAA,kCAILG,CAAK;AAAA;AAAA;AAAA;AAAA,kCAILF,CAAQ;AAAA;AAAA;AAAA;AAAA,kCAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,MAIrC,EAAE,KAAK,EAAE,EACXrB,EAAO,mBAAmB,YAAae,CAAM,CACjD"}